default: all

# Basic options.
prefix=		$(TWEEK_BASE_DIR)
srcdir=		@srcdir@
JAVAC_FLAGS=	-classpath $(CLASSPATH) -sourcepath $(srcdir) -d .
JCPS=		@JCPS@

CLASSPATH=	@tweek_java_api_jars@

# Commands to execute.
JAVA_COMPILE=	@JAVAC@ $(JAVAC_FLAGS)
JAR=		@JAR@

VPATH=		@srcdir@

CLASSES=	fileopentestbean/FileOpenTestBean.class
ALL_CLASSES=	fileopentestbean/*.class

# -----------------------------------------------------------------------------
# Application build targets.
# -----------------------------------------------------------------------------
all:
	$(MAKE) java
	$(MAKE) FileOpenTestBean.jar
	-$(MAKE) install

java: $(CLASSES)

FileOpenTestBean.jar: $(CLASSES)
	$(JAR) cvf $@ $(ALL_CLASSES)

install:
	cp FileOpenTestBean.jar $(TWEEK_BASE_DIR)/share/tweek/beans
	cp $(srcdir)/FileOpenTestBean.xml $(TWEEK_BASE_DIR)/share/tweek/beans

# Suffix rules for building object files.
.SUFFIXES: .java .class

.java.class:
	$(JAVA_COMPILE) $<

# -----------------------------------------------------------------------------
# Clean-up targets.
# -----------------------------------------------------------------------------
clean:
	rm -f $(ALL_CLASSES)

clobber:
	@$(MAKE) clean
	rm -f FileOpenTestBean.jar
