<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">

<HEAD>
<TITLE>Running a VR Juggler Sample Program</TITLE>
</HEAD>

<BODY>

<!--NewPage-->
<H1>Running a VR Juggler Sample Program</H1>

<!-- install-web toc-begin -->
<H2>Table of Contents</H2>

  <OL>
    <LI>
      <A HREF="#intro">Introduction</A>
    </LI>
    <LI>
      <A HREF="#reading">Required Reading</A>
    </LI>
    <LI>
      <A HREF="#simulator">Running an Application in Simulator Mode</A>

      <OL TYPE="i">
	<LI>
	  <A HREF="#glove">Using a Simulated Glove</A>
	</LI>
	<LI>
	  <A HREF="#analog">Using a Simulated Analog Device</A>
	</LI>
      </OL>
    </LI>
    <LI>
      <A HREF="#full">Running an Application in a VR System</A>
    </LI>
  </OL>
<!-- install-web toc-end -->

<A NAME="intro"><H2>Introduction</H2></A>

  <P>
    So you have a VR Juggler sample application compiled and ready to go,
    but you don't understand all these config files?  Well, you have come
    to the right place!  This document explains how to run a sample
    application (namely, the <TT>torus</TT> application found in
    <TT>$VJ_BASE_DIR/samples/ogl/torus</TT>) in both simulator mode and
    in full-scale mode in a real VR system.
  </P>

  <P>
    It is important to note that the same VR Juggler application can be
    run in simulator mode or in a full-scale VR system with <I>no
    modifications</I>.  What does change is the configuration files used
    when starting the program.  In <TT>$VJ_BASE_DIR/Data/configFiles</TT>,
    you can find many basic configuration files including those for
    running in simulator using a mouse and keyboard to simulate VR input
    devices and some example files based on those used for the VRAC C2
    systems.  In the directory, you will see some files whose name
    contains ``<TT>mixin</TT>''.  These are special files that provide a
    specific capability not necessarily needed by all applications.  They
    can be mixed in (hence the name) with other configuration files as
    needed.  The configuration files found in the <TT>configFiles</TT>
    directory will be referenced in the examples provided, so be sure you
    know where they are.
  </P>

<A NAME="reading"><H2>Required Reading</H2></A>

  <P>
    Before reading any further, make sure you have already read the
    instructions on how to <A HREF="${GETTINGSTARTED}/install.html">install
    VR Juggler</A> and on how to
    <A HREF="${GETTINGSTARTED}/environment.variables.html">configure your
    environment</A>.  That information will not be repeated, and it is
    assumed that you already know what we mean by <TT>$VJ_BASE_DIR</TT>
    and $LD_LIBRARY_PATH to name two environment variables.  At this point,
    it is also assumed that you already have compiled an application
    (<TT>torus</TT> in the case of the examples provided), so you should
    be sure to have read about
    <A HREF="${GETTINGSTARTED}/app.compiling.html">how to compile a sample
    VR Juggler application</A> before proceeding.
  </P>

<A NAME="simulator"><H2>Running an Application in Simulator Mode</H2></A>

  <P>
    Running in simulator mode means that your input is simulated and your
    display windows have limited functionality.  (By, ``simulated input'',
    we mean that input is provided through windows that take keyboard and
    mouse input and translate that into transformations in the virtual
    world.)  Simulator displays are limited primarily in that they cannot
    display stereo graphics.  It is important to note that a simulator
    display is a special kind of VR Juggler display.  Instead of basing its
    viewpoint on the head position of one of the users, the viewpoint is
    controlled by a separate ``camera'' that is just another positional
    device.  The Sim Display also draws certain objects to help visualize
    the environment.  For example, the heads of users are represented as
    blue spheres with gray eyes, and a wand (if present) is drawn as a
    green cone.  Besides these common simulator objects, surface displays
    can be drawn.  These are Juggler Displays representing projection
    screens or HMD viewing projections and are drawn as translucent
    rectangles.
  </P>

  <P>
    As mentioned, several simulator configuration files are provided with
    a VR Juggler distribution.  These files provide a complete simulation
    of an immersive environment.  Please note that this documentation
    reflects the state of the configuration files at the time the
    documentation was written.  For more information about the
    configuration files and how to view or modify the configuration,
    refer to the <A HREF="${VJCONTROL}"><I>VjControl Guide</I></A>.  (Using
    VjControl is the best way to find out how a specific configuration
    file is set up.)  The configuration files of interest for simulator
    mode are as follows:

    <UL>
      <LI>
	<TT>sim.base.config</TT> - The basic configuration file needed by
	all applications when run in simulator mode.  It defines commonly
	used VR Juggler concepts that are beyond the scope of this
	particular book.  It also defines simulated head movement using the
	keyboard.  For now, it is sufficient to know that it is required to
	run the sample applications in simulator mode.
      </LI>
      <LI>
	<TT>sim.displays.config</TT> - The basic simulator display
	configuration file needed by all applications when run in
	simulator mode.  This file defines the display windows where the
	rendering magic occurs.  Two simulator display windows are
	configured by this file: a small one that is active by default and
	a larger one that is inactive initially.
      </LI>
      <LI>
	<TT>sim.analog.mixin.config</TT> - A ``mix-in'' configuration file
	that defines simulated analog input using the keyboard.  This is
	only required for applications where analog input is used and needs
	to be simulated when in simulator mode.
      </LI>
      <LI>
	<TT>sim.c6displays.mixin.config</TT> - A ``mix-in'' configuration
	file that defines the surface displays of VRAC's C6.  This is not
	required for any application but can be used to test opening
	multiple display windows (both surface and simulator) before
	running in a multi-screen VR system.
      </LI>
      <LI>
	<TT>sim.digital.glove.mixin.config</TT> - A ``mix-in'' configuration
	file that defines simulated digital glove input using the keyboard.
	This is only required for applications where digital glove
	input is used and needs to be simulated when in simulator mode.
      </LI>
      <LI>
	<TT>sim.glove.mixin.config</TT> - A ``mix-in'' configuration file
	that defines simulated gesture-based glove input using the keyboard.
	This is only required for applications where gesture-based glove
	input is used and needs to be simulated when in simulator mode.
      </LI>
      <LI>
	<TT>sim.wand.mixin.config</TT> - A ``mix-in'' configuration file
	that defines simulated wand input using the mouse.  This is only
	required for applications where wand input is used and needs to
	be simulated when in simulator mode.
      </LI>
    </UL>

    For the <TT>torus</TT> application, we only need the base configuration
    file, the displays configuration file and the wand mix-in configuration
    file.
  </P>

  <P>
    Now it's time to run the application--finally!  Make sure that all your
    environment variables are set properly before trying to start the
    application.  Once you are ready, you specify the name of the
    application and all the configuration files it needs.  An example of
    this is:

<PRE>
    % <B>torus sim.base.config sim.displays.config sim.wand.mixin.config</B>
</PRE>

    You will notice that no paths are specified for finding the three
    configuration files.  This is intentional to shorten the command line
    given in the example.  In general, you always have to give the full
    path to the files.  VR Juggler does not have any logic (at this time)
    for defining a path that would contain configuration files.
    Beginning users will typically want to reference the example
    configuration files in <TT>$VJ_BASE_DIR/Data/configFiles</TT>.  As
    you get more comfortable with VR Juggler and its configuration
    system, you may want to make your own modified files and put them in
    the directory <TT>$HOME/.vjconfig</TT>.  To simplify running
    applications, you may want to make a shell script (or batch file as
    appropriate) that does all the work of passing configuration files
    and common command-line arguments.  For now, though, use the path
    <TT>$VJ_BASE_DIR/Data/configFiles</TT> for each of the configuration
    files you pass on the command line.
  </P>

  <P>
    As the application starts, you will see a plethora of output (more or
    less depending on how you have <TT>$VJ_DEBUG_NFY_LEVEL</TT> and
    <TT>$VJ_DEBUG_CATAGORIES</TT> set), and then one moderately sized
    simulator display window will open on the left side of your screen
    while three blank keyboard input windows open on the right side of
    your screen.  The display window will be titled ``SimWindow1'', and the
    keyboard input windows will be titled ``Head Keyboard'', ``Sim View
    Cameras Control'' and ``Wand Keyboard'' (in order from the top of the
    display to the bottom).  Don't worry that the keyboard windows are
    black--that's normal.  The display window will have a purple torus,
    a cyan sphere and a green cone.  The torus is what you have come to
    see; the sphere is the simulated user's head; and the cone is the
    simulated user's wand.  Figure 1 below shows how this looks on an IRIX
    6.5 desktop for comparison with what you are seeing.  Note that the
    head and wand are <I>only</I> rendered in the simulator windows.
    They are present because head and wand input are being simulated,
    and it is typically quite helpful to see the results of that
    simulated input.
  </P>

  <DIV ALIGN="CENTER">
    <TABLE BORDER="0" WIDTH="405">
      <TR>
	<TD ALIGN="CENTER">
	  <A HREF="${GETTINGSTARTED}/torus.screenshot.jpg"><IMG WIDTH="400" HEIGHT="237" SRC="${GETTINGSTARTED}/torus.thumbnail.jpg"></A>
	</TD>
      </TR>
      <TR>
	<TD ALIGN="LEFT">
	  <B>Figure 1.</B> <TT>torus</TT> running on an IRIX desktop
	</TD>
      </TR>
    </TABLE>
  </DIV>

  <P>
    So now you're probably wondering what you can do with this fancy
    application.  Interaction is done through the keyboard windows on the
    right side of your desktop.  Moving the head is done with the keyboard
    in ``Head Keyboard''; moving the camera is done with with the keyboard
    int ``Sim View Cameras Control''; and moving the wand is done with the
    mouse in ``Wand Keyboard''.  As noted above, this information is
    current as of this writing.  For information on how to verify these
    settings and to view the current configuration, refer to the
    <A HREF="${VJCONTROL}"><I>VjControl Guide</I></A>.  The following list of
    tables provides all the keyboard and mouse controls for the simulator
    when using these particular configuration files.  Note that it is
    possible to reconfigure the simulator to suit your preferences.  This
    is provided mainly for those who just want something that works now.
  </P>

  <DL>
    <DT><B>Moving the user's head</B>
      <DD>
	<TABLE BORDER="1">
	  <TR>
	    <TH>
	      Transformation
	    </TH>
	    <TH>
	      Key Press
	    </TH>
	  </TR>
	  <TR>
	    <TD>
	      Move head backward
	    </TD>
	    <TD>
	      2 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move head left
	    </TD>
	    <TD>
	      4 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move head right
	    </TD>
	    <TD>
	      6 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move head forward
	    </TD>
	    <TD>
	      8 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move head down
	    </TD>
	    <TD>
	      7 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move head up
	    </TD>
	    <TD>
	      9 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn head up
	    </TD>
	    <TD>
	      CTRL+2 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn head left
	    </TD>
	    <TD>
	      CTRL+4 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn head right
	    </TD>
	    <TD>
	      CTRL+6 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn head down
	    </TD>
	    <TD>
	      CTRL+8 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate head clockwise
	    </TD>
	    <TD>
	      1 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate head counter-clockwise
	    </TD>
	    <TD>
	      3 on keypad
	    </TD>
	  </TR>
	</TABLE>
      </DD>
    <DT><B>Moving the user's wand</B>
      <DD>
	<TABLE BORDER="1">
	  <TR>
	    <TH>
	      Transformation
	    </TH>
	    <TH>
	      Mouse Input
	    </TH>
	  </TR>
	  <TR>
	    <TD>
	      Move wand backward
	    </TD>
	    <TD>
	      ALT+move mouse backward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move wand forward
	    </TD>
	    <TD>
	      CTRL+move mouse forward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move wand left
	    </TD>
	    <TD>
	      CTRL+move mouse left
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move wand right
	    </TD>
	    <TD>
	      CTRL+move mouse right
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move wand up
	    </TD>
	    <TD>
	      CTRL+move mouse forward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move wand down
	    </TD>
	    <TD>
	      CTRL+move mouse backward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand left
	    </TD>
	    <TD>
	      SHIFT+move mouse left
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand right
	    </TD>
	    <TD>
	      SHIFT+move mouse right
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand up
	    </TD>
	    <TD>
	      SHIFT+move mouse forward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand down
	    </TD>
	    <TD>
	      SHIFT+move mouse backward
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand clockwise
	    </TD>
	    <TD>
	      Right arrow
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate wand counter-clockwise
	    </TD>
	    <TD>
	      Left arrow
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Wand button #1
	    </TD>
	    <TD>
	      Left mouse button
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Wand button #2
	    </TD>
	    <TD>
	      Middle mouse button
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Wand button #3
	    </TD>
	    <TD>
	      Right mouse button
	    </TD>
	  </TR>
	</TABLE>
      </DD>
    <DT><B>Moving the camera</B>
      <DD>
	<TABLE BORDER="1">
	  <TR>
	    <TH>
	      Transformation
	    </TH>
	    <TH>
	      Key Press
	    </TH>
	  </TR>
	  <TR>
	    <TD>
	      Move camera backward
	    </TD>
	    <TD>
	      2 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move camera left
	    </TD>
	    <TD>
	      4 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move camera right
	    </TD>
	    <TD>
	      6 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move camera forward
	    </TD>
	    <TD>
	      8 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move camera down
	    </TD>
	    <TD>
	      7 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Move camera up
	    </TD>
	    <TD>
	      9 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn camera up
	    </TD>
	    <TD>
	      CTRL+2 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn camera left
	    </TD>
	    <TD>
	      CTRL+4 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn camera right
	    </TD>
	    <TD>
	      CTRL+6 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Turn camera down
	    </TD>
	    <TD>
	      CTRL+8 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate camera clockwise
	    </TD>
	    <TD>
	      1 on keypad
	    </TD>
	  </TR>
	  <TR>
	    <TD>
	      Rotate camera counter-clockwise
	    </TD>
	    <TD>
	      3 on keypad
	    </TD>
	  </TR>
	</TABLE>
      </DD>
  </DL>

  <P>
    Before continuing on to running an application in a full-scale VR
    system, we provide two asides: using a simulated glove and using a
    simulated analog device.  The examples provided thus far have not
    discussed this because the information was not relevant to the
    particular sample application being used.  Knowing how to use these
    simulated devices is important, however, and it is treated separately
    as a reference for your future endeavors in running VR Juggler
    applications.
  </P>

<A NAME="glove"><H3>Using a Simulated Glove</H3></A>

  <P>
    If you include the <TT>sim.glove.mixin.config</TT> file, your application
    will also have access to a simulated glove, with position and gesture 
    inputs.  The glove is controlled by a window titled ``<TT>Glove
    Keyboard</TT>''.  This window lets you control the glove position and
    selected gesture.  Movement control of the glove uses the mouse and is
    the same as that of the wand.  The mouse buttons are used to select
    gestures.  The mapping of the gesture numbers to actual hand positions
    is controlled by the ``training file'' for the sim glove.  The defaults
    training file is
    <TT>$VJ_BASE_DIR/Data/gesture/simpleSimGestures.dat</TT>.
  </P>

<A NAME="analog"><H3>Using a Simulated Analog Device</H3></A>

  <P>
    If you include the <TT>sim.analog.mixin.config</TT> file, your
    application will also have access to a set of four analog devices
    (devices with a value in a range from 0.0 to 1.0).  The analog devices
    are also controlled using the ``<TT>Wand Keyboard</TT>'' window which
    means that their config file requires the wand config file.  They
    key presses used for controlling the analog devices are:

    <BLOCKQUOTE>
      <TABLE BORDER="1">
        <TR>
	  <TH>
	    Analog Device Action
	  </TH>
	  <TH>
	    Key Press
	  </TH>
        </TR>
        <TR>
	  <TD>
	    VJAnalog0 increase
	  </TD>
	  <TD ALIGN="CENTER">
	    Q
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog0 decrease
	  </TD>
	  <TD ALIGN="CENTER">
	    A
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog1 increase
	  </TD>
	  <TD ALIGN="CENTER">
	    W
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog1 decrease
	  </TD>
	  <TD ALIGN="CENTER">
	    S
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog2 increase
	  </TD>
	  <TD ALIGN="CENTER">
	    E
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog2 decrease
	  </TD>
	  <TD ALIGN="CENTER">
	    D
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog3 increase
	  </TD>
	  <TD ALIGN="CENTER">
	    R
	  </TD>
        </TR>
        <TR>
	  <TD>
	    VJAnalog3 decrease
	  </TD>
	  <TD ALIGN="CENTER">
	    F
	  </TD>
        </TR>
      </TABLE>
    </BLOCKQUOTE>

    If you aren't using a QWERTY keyboard, you'll probably want to change
    those to something more intuitive.
  </P>

<A NAME="full"><H2>Running an Application in a VR System</H2></A>

  <P>
    Running an application full-scale in a VR system is more complicated
    than running in simulator mode.  The reason for this is that VR systems
    tend to differ in configuration and in available hardware.  VR Juggler
    is flexible enough to handle most any configuration you throw at it,
    but those configurations need to be put together first.  Examples of
    configuration files used in VRAC's C2 system are provided, and they
    are used in this documentation.  It should be noted, however, that for
    any particular system, custom configuration files will probably have to
    be written.  The idea behind this section is to provide a basic
    understanding of what is needed to get started with running in a VR
    system.
  </P>

  <P>
    The example configuration files in the directory
    <TT>$VJ_BASE_DIR/Data/configFiles</TT> modeled after those used for
    VRAC's C2 system are as follows:

    <UL>
      <LI>
	<TT>C2.base.config</TT> -  The basic configuration file needed by
	all applications when run in the C2.  It defines commonly used VR
	Juggler concepts that are beyond the scope of this particular book.
      </LI>
      <LI>
	<TT>C2.displays.config</TT> - The basic display configuration file
	needed to run with all four walls active and rendering stereo
	graphics.  This defines only the four surface displays to be
	opened.
      </LI>
      <LI>
	<TT>C2.flock.config</TT> - The Ascension Flock of Birds configuration
	file that defines which bird provides input for the head and for the
	wand.
      </LI>
      <LI>
	<TT>C2.ibox_buttons.config</TT> - The IBOX configuration file that
	handles the digital wand button inputs.
      </LI>
      <LI>
	<TT>C2.mono.displays.config</TT> - The same configuration as
	<TT>C2.displays.config</TT> except that the walls are opened to
	render mono graphics.
      </LI>
    </UL>
  </P>

  <P>
    Running the application is the same as in simulator mode except that
    the configuration files given on the command line are different.  For
    example, to run <TT>torus</TT> in the C2 with stereo graphics, the
    following command would be used:

<PRE>
    % <B>torus C2.base.config C2.displays.config C2.flock.config C2.ibox_buttons.config</B>
</PRE>

    Similarly, to run with mono graphics, the following would be run:

<PRE>
    % <B>torus C2.base.config C2.mono.displays.config C2.flock.config C2.ibox_buttons.config</B>
</PRE>

    All VR systems will use the same basic concepts as those presented
    here.  This is possible because VR Juggler generalizes its concepts
    and applications so that they are suitable for many, many different
    possible configurations.
  </P>

</BODY>
