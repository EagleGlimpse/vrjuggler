<html>

<title>An introduction to VR Juggler configuration files</title>

<body>

<h1>An introduction to VR Juggler configuration files</h1>

Configuring VR software for a particular hardware system can be a daunting task due to the complexity and diversity of the environments and hardware in use. In addition to this, many users will need to switch between immersive VR hardware and desktop simulators during development, or between one hardware system or another.

<p>
VR Juggler's inherent flexibility increases this complexity. Juggler components such as displays and device drivers can be combined in many ways.  For example, a configuration could mix simulated and real input devices.  Or, hardware permitting, VR Juggler could use two separate head-mounted displays (HMDs) simultaneously.  Input devices can be chained together, manipulated in a variety of ways, and mapped to different names.  The possibilities are endless - but so are the potential pitfalls.

<p>
VR Juggler's configuration system was designed to simplify this task as much as possible.  While Juggler uses plain text configuration files, these files are heavily structured and organized.  Juggler's config files can be written in a modular fashion, so that different components or hardware features can be easily mixed together.  Finally, VR Juggler provides a GUI tool, VjControl, for editing configuration files.  The GUI can prevent many kinds of errors and make the user's task easier by presenting the available options, valid arguments, help information, and so on.

<h2>Loading configuration files</h2>

When a VR Juggler application is initialized, it creates an internal
database of configuration information.  This database will contain information
about the kind of I/O devices available, the display windows Juggler should
open, and lots of other stuff.

<p>
Typically, this database will be filled up by reading one or more configuration
files.  With many Juggler applications, the names of config files to load
are given as command-line arguments when the program is run.  For example:

<pre>
       cubes ~/.vjconfig/simstandalone.config
</pre>

runs the <tt>cubes</tt> demo program and tells it to load a configuration file called <tt>simstandalone.config</tt>, which provides a basic simulator-mode configuration for running applications.

<p>
Configuration files can be stored in serveral places:
<ul>
<li>The Juggler distribution contains a number of sample files in
<tt>$VJ_BASE_DIR/Data/configFiles/</tt>.  These include a variety of configuration files for simulator-mode use, as well as a number of files demonstrating how VR Juggler can be configured for various kinds of VR hardware.
<li>Juggler expects you to have a directory called <tt>.vjconfig</tt> in
your home directory.  This is a good place to put any config files that
you've chosen to modify.  For example, if you've changed one of the
simulator config files because you didn't like the keyboard shortcuts it
was using, you should put it in <tt>~/.vjconfig</tt>.
<li>Your system administrators may have also created a repository of
Juggler config files set up to work with your local systems and 
hardware.  For example, VRAC keeps local configurations in the directory <tt>/home/vr/vjconfig</tt>.
</ul>



<a name="modular">
<h2>Using modular configuration files</h2>

<p>
One of the difficulties of managing a VR system is the rapid 
proliferation of configuration files.  If the entire configuration is 
read from a single file, then there must exist separate files for every 
possible permutation of configurations - simulators, projection 
systems, projection systems with simulated input devices, or configured 
with monoscopic displays for photo sessions, or monoscopic displays 
<i>and</i> simulated input devices, etc.  Keeping all these files 
up-to-date can become a full-time job.

<p>
VR Juggler sidesteps this problem with the concept of <i>modular 
configuration files</i>. Instead of listing a single configuration 
file on the application's command line, we list several.  Each file 
contains config file contains configuration information relevant to 
a particular part of the system. For example, one could define all 
the displays to be used, while another could define the input 
devices, and a third could describe how those inputs are mapped 
to a user's head, glove, wand, etc.  There could be several variations 
of each file to choose from: display configs for an HMD, simulator 
window, desk, monoscopic desk, etc.; input config files for several 
varieties of hardware, or the user's preferred simulator setup.  So 
long as a consistent set of names are used for input devices and so 
on, these files could be freely mixed and matched, eliminating the 
need to have a separate file for every possible combination.

<p>
The VR Juggler distribution includes several examples of modular configuration files in the directory <tt>$VJ_BASE_DIR/Data/configFiles</tt>.  The <tt>sim.*.config</tt> files can be used in various combinations to run an application with various kinds of simulator devices.  For example, a basic simulator configuration with one display window and a wand would use these files:

<ul><tt>
<li>sim.base.config
<li>sim.displays.config
<li>sim.wand.mixin.config
</tt></ul>

Other files could be used to change the basic configuration.  For example, to use a simulated glove instead of a wand, the user would replace <tt>sim.wand.mixin.config</tt> with <tt>sim.glove.mixin.config</tt>.



<a name="includes">
<h2> Referencing other configuration files</h2>

<p>
If used properly, the modular configuration file concept can provide maximum flexibility while keeping the number of different configuration files at a manageable level.  However, users do not always want to list the names of four or five separate config files on the command line every time they run a program.  Also, a small set of combinations will see the majority of use - a fully simulator configuration, for example, is likely to be used heavily by most developers (but each developer is likely to have a slightly different idea of the <I>preferred</I> simulator configuration).

<p>
To provide ease of use - referencing a complete configuration with a single name - without falling into the trap of config file proliferation, VR Juggler config files feature an include directive, similar to the #include preprocessor directive of C or C++.  Thus, a user can create a config file which simply references several files in the system repository.  He only needs to keep track of the single file's name, but when any of the included files are updated, he automatically sees the changes.

<a name="next">
<h2>Where to go next?</h2>

<p>
To find out what's inside a VR Juggler configuration file, proceed to the <a href="chunkprimer.html">ConfigChunk Primer</a>.

</body>

</html>

