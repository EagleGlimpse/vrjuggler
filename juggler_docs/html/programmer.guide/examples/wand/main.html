<html>

<head>
<title>Main Routine</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 3.0">


<meta name="Microsoft Border" content="tb">
</head>

<body><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

<p align="left"><font size="6"><strong>Main Routine</strong></font></p>

</td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><!--msnavigation--><td valign="top">
<div align="left">

<table border="0" width="94%" height="1">
  <tr>
    <td width="15%" height="1"></td>
    <td width="85%" height="84"><div align="left"><table border="0">
      <tr>
        <td><h3>Main Routine</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">#include &lt;wandApp.h&gt;<br>
        #include &lt;Kernel/vjKernel.h&gt;<br>
        <br>
        int main(int argc, char* argv[])<br>
        {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vjKernel* kernel = vjKernel::instance();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //
        Get the kernel<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wandApp* application = new wandApp(kernel);&nbsp;&nbsp; //
        Declare an instance of the app<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel-&gt;setApplication(application);
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //
        Set application<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel-&gt;start();<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(1)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {;}<br>
        }</font></td>
      </tr>
      <tr>
        <td>&nbsp;<h3>Includes</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">#include &lt;wandApp.h&gt;<br>
        #include &lt;Kernel/vjKernel.h&gt;</font></td>
      </tr>
      <tr>
        <td>Include the user application and include the code for the Juggler kernel<h3>Create
        user application</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vjKernel* kernel =
        vjKernel::instance();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //
        Get the kernel<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wandApp* application = new wandApp(kernel);
        &nbsp;&nbsp;&nbsp;&nbsp; // Declare an instance of the app</font></td>
      </tr>
      <tr>
        <td>The first line gets a pointer to the running kernel.&nbsp; This is needed to create
        the user application on the second line.&nbsp; When the user application is create, the
        pointer to the kernel must be passed as shown above so that the application's constructor
        can have a reference to the kernel.<h3>Set the application</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel-&gt;setApplication(application);
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //
        Set application</font></td>
      </tr>
      <tr>
        <td>This line passes the kernel the application that it should be dealing with.&nbsp; From
        this information the kernel can then create all the necessary objects to run the system.<h3>Start
        the kernel</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kernel-&gt;start();<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(1)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {;}</font></td>
      </tr>
      <tr>
        <td>These lines start the kernel running and then loop forever.&nbsp; When the kernel
        starts, it creates a new thread to run in.&nbsp; Then it configures the system and starts
        running the specified application.<p><strong>Note</strong>: In the future there will be a
        flag that can be checked in order to gracefully exit the program.</td>
      </tr>
    </table>
    </div><div align="right"><table border="0">
    </table>
    </div></td>
  </tr>
</table>
</div>

<p>&nbsp; 
<!--msnavigation--></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><table border="0">
</table></td></tr><!--msnavigation--></table></body>
</html>
