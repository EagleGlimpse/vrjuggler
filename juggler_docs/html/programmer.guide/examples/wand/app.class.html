<html>

<head>
<title>Device Interface</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">


<meta name="Microsoft Border" content="tb">
</head>

<body><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

<p align="left"><nobr>[&nbsp;<a href="../../index.htm">Home</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="wand.htm">Up</a>&nbsp;]</nobr></p>

<p align="left"><font size="6"><strong>Dev Interface</strong></font></p>

</td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><!--msnavigation--><td valign="top">
<div align="left">

<table border="0" width="94%" height="1">
  <tr>
    <td width="15%" height="1"></td>
    <td width="85%" height="84">&nbsp;Application class<div align="left"><table border="0">
      <tr>
        <td><font face="System">class wandApp : public vjGlApp<br>
        {<br>
        public:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wandApp(vjKernel* kern)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : vjGlApp(kern) // Initialize base class<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {;}<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Execute any initialization needed before the API is
        started<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual void init()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Initialize devices<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mWand.init(&quot;VJWand&quot;);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //: Function to draw the scen<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual void draw()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initGLState();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Init graphics state<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDraw();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Draw scene<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //: Draw a box at the end of the wand<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void myDraw()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glClearColor(0.0, 0.0, 0.0, 0.0);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glMatrixMode(GL_MODELVIEW);<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // -- Draw box on wand --- //<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vjMatrix* wandMatrix;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wandMatrix = mWand-&gt;GetData();<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glPushMatrix(); <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glMultMatrixf(wandMatrix-&gt;getFloatPtr());<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glColor3f(1.0f, 0.0f,
        1.0f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glScalef(0.25f, 0.25f,
        0.25f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; drawCube();<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // A little laser
        pointer<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glLineWidth(2.0f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glBegin(GL_LINES);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glColor3f(1.0f,
        0.0f, 0.0f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glVertex3f(0.0f,
        0.0f, 0.0f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glVertex3f(0.0f,
        0.0f, -10.0f);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glEnd();<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glPopMatrix();<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void initGLState()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glEnable(GL_DEPTH_TEST);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glEnable(GL_NORMALIZE);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glShadeModel(GL_SMOOTH);
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void drawCube()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... commands to draw
        the cube<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
        <br>
        public:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vjPosInterface mWand; // the Wand<br>
        };<br>
        </font><p>&nbsp;</td>
      </tr>
      <tr>
        <td><h3>Initialize device interfaces</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual void init()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Initialize devices<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mWand.init(&quot;VJWand&quot;);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></td>
      </tr>
      <tr>
        <td>This function initializes the mWand vjPosInterface to point to the &quot;VJWand&quot;
        device declared in our configuration.&nbsp; This variable (mWand) can then be used
        anywhere in the program as a smart pointer to access the vjPosProxy that is connected to
        the VJWand device.&nbsp; This allows the application to find the position of the wand.</td>
      </tr>
      <tr>
        <td>&nbsp;<h3>Declare a draw function</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual void draw()<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initGLState();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Init graphics state<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDraw();
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Draw scene<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font></td>
      </tr>
      <tr>
        <td>This function declares the draw function that the kernel will call to draw the OpenGL
        objects in the application. <p>Note: These commands may be executed in seperate threads.
        &nbsp; There may be as many threads as there are display surfaces in the environment</td>
      </tr>
    </table>
    </div><div align="right"><table border="0">
      <tr>
        <td><!--webbot bot="Navigation" S-Type="arrows" S-Orientation="horizontal" S-Rendering="graphics" B-Include-Home="FALSE" B-Include-Up="FALSE" U-Page S-Target startspan --><nobr>[&nbsp;<a href="wand_1.htm">Back</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="wand_3.htm">Next</a>&nbsp;]</nobr><!--webbot bot="Navigation" endspan i-checksum="45244" --></td>
      </tr>
    </table>
    </div></td>
  </tr>
</table>
</div>

<p>&nbsp;<!--msnavigation--></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><table border="0">
  <tr>
    <td><img src="../../_borders/juggler.gif" alt="juggler.gif (2873 bytes)" width="29" height="33"></td>
    <td><h5>VR Juggler<br>
    Copyright 1998 ©&nbsp; All rights reserved.<br>
    Revised: July 01, 1999.</h5>
    </td>
  </tr>
</table></td></tr><!--msnavigation--></table></body>
</html>
