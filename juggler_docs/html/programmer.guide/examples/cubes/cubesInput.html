<html>

<head>
<title>Input</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 3.0">


<meta name="Microsoft Border" content="tb">
</head>

<body><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

<p align="left"><font size="6"><strong>Input</strong></font></p>

</td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><!--msnavigation--><td valign="top">
<div align="left">

<table border="0" width="94%" height="1">
  <tr>
    <td width="15%" height="1"></td>
    <td width="85%" height="84"><div align="left"><table border="0">
      <tr>
        <td><h3>Overview of input</h3>
        </td>
      </tr>
      <tr>
        <td>The cubes application uses several forms of input.&nbsp; It uses the transformation of
        the wand to ratate the viewer, and it uses the button states of the wand to change the
        forward motion of the navigation.<p>Input in the application can be handled using device
        interfaces.&nbsp; (see <a href="../../classes/devInterface.htm">device interfaces</a>)
        &nbsp; By using VR Juggler's device interface classes, the application does not have to
        deal directly with device proxies.&nbsp; Device interfaces allow developers simple access
        to proxy data.</p>
        <p>When using device interfaces the application does the following:</p>
        <ul>
          <li>Declare the device interface objects</li>
          <li>Initialize the device interfaces to point to a configured proxy</li>
          <li>Use the device interfaces to get input data</li>
        </ul>
        <p>&nbsp;</td>
      </tr>
      <tr>
        <td><h3>Required Includes</h3>
        </td>
      </tr>
      <tr>
        <td><font face="System">#include &lt;Input/InputManager/vjPosInterface.h&gt;<br>
        #include &lt;Input/InputManager/vjAnalogInterface.h&gt;<br>
        #include &lt;Input/InputManager/vjDigitalInterface.h&gt;</font></td>
      </tr>
      <tr>
        <td>Include the interface definitions<h3>Declare interface objects</h3>
        </td>
      </tr>
      <tr>
        <td><pre><font face="System">public:
   vjPosInterface       mWand;                      // the Wand
   vjPosInterface       mWandEnd;                // The index to the end of the wand
   vjDigitalInterface   mIncVelocityButton;   // Button for velocity
   vjDigitalInterface   mDecVelocityButton;
   vjDigitalInterface   mStopButton;              // Button to stop</font></pre>
        </td>
      </tr>
      <tr>
        <td>These members will be initialized and used by the application for all user input.<h3>Initialize
        the interfaces</h3>
        </td>
      </tr>
      <tr>
        <td><pre><font face="System">// Execute any initialization needed before the API is started
   virtual void init()
   {
         // Initialize devices
      mWand.init(&quot;VJWand&quot;);
      mIncVelocityButton.init(&quot;VJButton0&quot;);
      mDecVelocityButton.init(&quot;VJButton1&quot;);
      mStopButton.init(&quot;VJButton2&quot;);
   }</font></pre>
        </td>
      </tr>
      <tr>
        <td>Every vjInterface object calls the init routine to select the input proxy that it
        points to.&nbsp; These strings are from the current configuration.&nbsp; They are either a
        name of a proxy or the name of a proxy alias.<h3>Use the interfaces to get data</h3>
        </td>
      </tr>
      <tr>
        <td><pre><font face="System">// Update the navigation matrix
   //
   // Uses a quaternion to do rotation in the environment
   void updateNavigation()
   {
    
      ...

      vjMatrix* wand_matrix;
      wand_matrix = mWand-&gt;GetData();
      
     ...

      // Update velocity
      if(mIncVelocityButton-&gt;GetData())
         mCurVelocity += velocity_inc;
      else if(mDecVelocityButton-&gt;GetData())
         mCurVelocity -= velocity_inc;
      else if(mStopButton-&gt;GetData())
         mCurVelocity = 0.0f;
      
      ...
   }</font></pre>
        </td>
      </tr>
      <tr>
        <td>The mWand vjPosInterface object is used about to reference the posProxy for the wand.
        &nbsp; The vjPosInterface object is dereferenced (using operator-&gt;()) and then the
        GetData() method of vjPosProxy is called to get the current wand transformation matrix<p>The
        buttons in the system are checked using the same method.&nbsp; Notice that the
        mIncVelocityButton member is also dereferenced using operator-&gt;() and then the
        GetData() method is called to get the current button state.</td>
      </tr>
    </table>
    </div><div align="right"><table border="0">
    </table>
    </div></td>
  </tr>
</table>
</div>

<p>&nbsp; 
<!--msnavigation--></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><table border="0">
</table></td></tr><!--msnavigation--></table></body>
</html>
