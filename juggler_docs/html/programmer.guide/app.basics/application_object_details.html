<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Application Object Details</title>
</head>

<body>

<h2>Application Object Details</h2>
<h3>The functions that are called</h3>
<p>The base interface of the application object defines the following functions: init(), apiInit(), preFrame(), 

intraFrame(), and postFrame() &nbsp;The VR 

Juggler kernel calls these functions from it's control loop to allocate processing time to them.</p>
<p>Before going into these details we need to understand how VR Juggler calls the application and what 

a frame is.</p>
<h2>Kernel loop&nbsp;</h2>
<table border="0" cellpadding="0" cellspacing="0" width="20">
  <tr>
    <td colspan="4"></td>
  </tr>
  <tr>
    <td></td>
    <td>
      <pre>#include &lt;simpleApp.h&gt;</pre>
      <pre>int main(int argc, char* argv[])
{
   vjKernel* kernel = vjKernel::instance();
   simpleApp* app = new simpleApp(); 

   kernel-&gt;loadConfigFile(...);

   <font color="#FF0000"><b>kernel-&gt;start();</b></font>

   kernel-&gt;setApplication(app);

   while(!exit)
   {
     // sleep
   }
}</pre>
      <p>&nbsp;</td>
    <td><img border="0" src="${PROGRAMMERGUIDE}/images/AppInitAndMainLoop_modified.gif" width="473" height="491"></td>
    <td></td>
  </tr>
  <tr>
    <td colspan="4"></td>
  </tr>
</table>
<h3>How does the kernel loop start?</h3>
<p>The figure shown above shows a timing diagram of the kernel and application
object start up.&nbsp; The sequence on the right starts when the <tt>kernel-&gt;start()</tt>
line is executed in the <tt>main()</tt> function on the left.&nbsp; This line
tells the kernel thread to start running.&nbsp; When the kernel begins running,
it starts calling the functions outlined in the diagram on the right.</p>
<h3>What is a frame</h3>
<p>The kernel calls each of the application object's member functions based on a strictly scheduled frame of execution.&nbsp;
The frame of execution is shown in the figure above.&nbsp; The frame of
execution is all the lines within the <tt>while(running)</tt> clause above.</p>
<p>During 

the frame of execution, the 

kernel calls the application methods and performs internal updates (see
updateAllData() in the figure ablove). &nbsp;Because the kernel has complete 

control over the frame, it can make changes at predefined &quot;safe&quot; times when the application 

is not doing any processing. &nbsp;During these &quot;safe&quot; times, 

the kernel can change the virtual platform configuration as long as the interface 

remains the same.</p>
<p>The frame of execution also serves as a framework for the application. &nbsp;The application can expect 

that when preFrame()

&nbsp;is called, the 

devices have just been updated for this frame. &nbsp;Applications can rely upon the system being in 

well-defined stages of the frame when the 

kernel</p>

</body>

</html>
